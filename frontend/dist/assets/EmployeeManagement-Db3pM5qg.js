import{d as Ne,ad as Pe,r as f,c as Se,Q as Oe,R as Re,e as g,g as r,h as e,t as n,P as D,N as v,w as a,i as p,E as z,M as i,l as y,ae as We,T as Be,af as ee,aa as A,ab as Y,ag as Ae,O as pe,V as Ye,a7 as ce,n as le,ah as _e,L as j,p as fe,ai as je,aj as Ie,a9 as Qe,o as u,v as He,ac as ae,ak as Ge,al as Je,am as Ke,_ as Xe}from"./index-CC1QUR8I.js";import{r as Ze}from"./request-RQfx8Tvg.js";import{g as xe,u as el,c as ll,d as al}from"./employees-BSCZnefs.js";const tl={class:"employee-management"},ol={class:"page-header"},sl={class:"header-left"},nl={class:"page-title"},rl={class:"page-subtitle"},il={class:"header-right"},ul={class:"card-header"},dl={class:"header-title"},ml={class:"filter-content"},pl={class:"filter-item"},cl={class:"filter-label"},_l={class:"filter-item"},fl={class:"filter-label"},yl={class:"filter-item"},vl={class:"filter-label"},bl={class:"filter-item"},gl={class:"filter-label"},hl={class:"filter-actions"},$l={class:"table-header"},wl={class:"header-title"},kl={class:"table-actions"},Vl={key:0},Cl={key:0},El={key:1,class:"text-muted"},Ul={key:1,class:"card-view"},zl={class:"employee-cards"},Dl=["onClick"],Ml={class:"card-avatar"},ql={class:"card-content"},Tl={class:"employee-name"},Fl={class:"employee-position"},Ll={class:"employee-department"},Nl={class:"card-tags"},Pl={class:"card-actions"},Sl={key:0,class:"employee-details"},Ol={key:0,style:{"margin-top":"20px"}},Rl=Ne({__name:"EmployeeManagement",setup(Wl){Pe();const I=f(!1),Q=f(!1),F=f([]),H=f([]),ye=f([]),te=f(0),G=f(1),J=f(10),P=f(""),S=f(""),O=f(""),R=f(""),W=f(!0),L=f("table"),M=f(!1),K=f(!1),_=f(null),q=f(!1),s=Se({employee_id:"",first_name:"",last_name:"",email:"",phone:"",date_of_birth:"",visa_status:"citizen",white_card_number:"",white_card_expiry:"",department:"",position:"",hourly_rate:25,employment_type:"full_time",start_date:"",status:"active",can_checkin:!0,emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_relationship:"",worksite_ids:[]}),ve={employee_id:[{required:!0,message:"请输入员工ID",trigger:"blur"}],first_name:[{required:!0,message:"请输入名字",trigger:"blur"}],last_name:[{required:!0,message:"请输入姓氏",trigger:"blur"}],email:[{type:"email",message:"请输入有效的邮箱地址",trigger:"blur"}],phone:[{required:!0,message:"请输入电话号码",trigger:"blur"}],date_of_birth:[{required:!0,message:"请选择出生日期",trigger:"change"}],white_card_number:[{required:!0,message:"请输入White Card号码",trigger:"blur"}],white_card_expiry:[{required:!0,message:"请选择White Card过期日期",trigger:"change"}],department:[{required:!0,message:"请选择部门",trigger:"change"}],position:[{required:!0,message:"请输入职位",trigger:"blur"}],hourly_rate:[{required:!0,message:"请输入时薪",trigger:"blur"}],start_date:[{required:!0,message:"请选择入职日期",trigger:"change"}],emergency_contact_name:[{required:!0,message:"请输入紧急联系人姓名",trigger:"blur"}],emergency_contact_phone:[{required:!0,message:"请输入紧急联系人电话",trigger:"blur"}],emergency_contact_relationship:[{required:!0,message:"请输入与紧急联系人的关系",trigger:"blur"}]},X=f(),be=Oe(()=>q.value?"编辑员工":"添加员工"),h=async()=>{I.value=!0;try{const l={page:G.value,limit:J.value,search:P.value,status:S.value,department:O.value,worksite_id:R.value},o=await xe(l);o.success?(F.value=o.data.employees||o.data,te.value=o.data.pagination?.total||o.data.employees?.length||0):z.error(o.message||"加载员工数据失败")}catch(l){z.error("加载员工数据失败"),console.error("Error loading employees:",l)}finally{I.value=!1}},ge=async()=>{try{const l=await Ze.get("/worksites");l.success?H.value=l.data.worksites||l.data||[]:z.error("加载工地数据失败")}catch(l){console.error("Error loading worksites:",l),z.error("加载工地数据失败")}},he=()=>{we(),q.value=!1,M.value=!0},oe=l=>{Object.assign(s,l),q.value=!0,M.value=!0},B=l=>{_.value=l,K.value=!0},$e=async()=>{X.value&&await X.value.validate(async l=>{if(l){Q.value=!0;try{if(q.value){const o=await el(s.employee_id,s);if(!o.success)throw new Error(o.message)}else{const o=await ll(s);if(!o.success)throw new Error(o.message)}z.success(q.value?"员工信息更新成功":"员工添加成功"),M.value=!1,h()}catch(o){z.error("保存失败"),console.error("Error saving employee:",o)}finally{Q.value=!1}}})},se=async l=>{try{await Qe.confirm("确定要删除这个员工吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const o=await al(l.employee_id);if(!o.success)throw new Error(o.message);z.success("员工删除成功"),h()}catch(o){o!=="cancel"&&(z.error("删除失败"),console.error("Error deleting employee:",o))}},we=()=>{Object.assign(s,{employee_id:"",first_name:"",last_name:"",email:"",phone:"",date_of_birth:"",visa_status:"citizen",white_card_number:"",white_card_expiry:"",department:"",position:"",hourly_rate:25,employment_type:"full_time",start_date:"",status:"active",can_checkin:!0,emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_relationship:"",worksite_ids:[]})},ke=()=>{P.value="",S.value="",O.value="",R.value="",h()},Ve=()=>{W.value=!W.value},ne=l=>new Date(l)>new Date,re=l=>new Date(l).toLocaleDateString(),Z=l=>({active:"success",inactive:"info",suspended:"danger"})[l]||"info",ie=l=>{const o=ye.value.find($=>$.id===l);return o?o.name:`部门 ${l}`};return Re(()=>{h(),ge()}),(l,o)=>{const $=p("el-icon"),b=p("el-button"),w=p("el-input"),d=p("el-col"),m=p("el-option"),E=p("el-select"),k=p("el-row"),Ce=p("el-collapse-transition"),ue=p("el-card"),U=p("el-tag"),Ee=p("el-button-group"),C=p("el-table-column"),Ue=p("el-table"),ze=p("el-avatar"),De=p("el-pagination"),c=p("el-form-item"),x=p("el-date-picker"),Me=p("el-input-number"),qe=p("el-switch"),de=p("el-divider"),Te=p("el-form"),me=p("el-dialog"),V=p("el-descriptions-item"),Fe=p("el-descriptions"),N=ce("permission"),Le=ce("loading");return u(),g("div",tl,[r("div",ol,[r("div",sl,[r("h1",nl,n(l.$t("employee.management")),1),r("p",rl,n(l.$t("employee.description")||"管理和查看所有员工信息"),1)]),r("div",il,[D((u(),v(b,{type:"primary",size:"default",onClick:he,class:"action-button"},{default:a(()=>[e($,null,{default:a(()=>[e(y(We))]),_:1}),i(" "+n(l.$t("employee.add")),1)]),_:1})),[[N,"EMPLOYEE_CREATE"]])])]),e(ue,{class:"filter-card",shadow:"hover"},{header:a(()=>[r("div",ul,[r("div",dl,[e($,null,{default:a(()=>[e(y(ee))]),_:1}),r("span",null,n(l.$t("common.filter")||"筛选条件"),1)]),e(b,{text:"",type:"primary",onClick:Ve},{default:a(()=>[e($,{class:pe({"rotate-180":W.value})},{default:a(()=>[e(y(Ye))]),_:1},8,["class"])]),_:1})])]),default:a(()=>[e(Ce,null,{default:a(()=>[D(r("div",ml,[e(k,{gutter:20,class:"filter-row"},{default:a(()=>[e(d,{lg:6,md:8,sm:12,xs:24},{default:a(()=>[r("div",pl,[r("label",cl,n(l.$t("common.search")),1),e(w,{modelValue:P.value,"onUpdate:modelValue":o[0]||(o[0]=t=>P.value=t),placeholder:l.$t("employee.searchPlaceholder"),clearable:"",onChange:h,size:"default"},{prefix:a(()=>[e($,null,{default:a(()=>[e(y(ee))]),_:1})]),_:1},8,["modelValue","placeholder"])])]),_:1}),e(d,{lg:4,md:6,sm:12,xs:24},{default:a(()=>[r("div",_l,[r("label",fl,n(l.$t("employee.status")),1),e(E,{modelValue:S.value,"onUpdate:modelValue":o[1]||(o[1]=t=>S.value=t),placeholder:l.$t("employee.status"),clearable:"",onChange:h,class:"full-width"},{default:a(()=>[e(m,{label:l.$t("status.active"),value:"active"},null,8,["label"]),e(m,{label:l.$t("status.inactive"),value:"inactive"},null,8,["label"]),e(m,{label:l.$t("status.suspended"),value:"suspended"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])])]),_:1}),e(d,{lg:4,md:6,sm:12,xs:24},{default:a(()=>[r("div",yl,[r("label",vl,n(l.$t("employee.department")),1),e(E,{modelValue:O.value,"onUpdate:modelValue":o[2]||(o[2]=t=>O.value=t),placeholder:l.$t("employee.department"),clearable:"",onChange:h,class:"full-width"},{default:a(()=>[e(m,{label:l.$t("department.construction"),value:"Construction"},null,8,["label"]),e(m,{label:l.$t("department.electrical"),value:"Electrical"},null,8,["label"]),e(m,{label:l.$t("department.safety"),value:"Safety"},null,8,["label"]),e(m,{label:l.$t("department.management"),value:"Management"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])])]),_:1}),e(d,{lg:4,md:6,sm:12,xs:24},{default:a(()=>[r("div",bl,[r("label",gl,n(l.$t("employee.worksite")),1),e(E,{modelValue:R.value,"onUpdate:modelValue":o[3]||(o[3]=t=>R.value=t),placeholder:l.$t("employee.worksite"),clearable:"",onChange:h,class:"full-width"},{default:a(()=>[(u(!0),g(A,null,Y(H.value,t=>(u(),v(m,{key:t.worksite_id,label:t.name,value:t.worksite_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])]),_:1}),e(d,{lg:6,md:8,sm:24,xs:24},{default:a(()=>[r("div",hl,[e(b,{onClick:ke,icon:y(Ae)},{default:a(()=>[i(n(l.$t("common.reset")),1)]),_:1},8,["icon"]),e(b,{type:"primary",onClick:h,icon:y(ee)},{default:a(()=>[i(n(l.$t("common.search")),1)]),_:1},8,["icon"])])]),_:1})]),_:1})],512),[[Be,W.value]])]),_:1})]),_:1}),e(ue,{class:"table-card",shadow:"hover"},{header:a(()=>[r("div",$l,[r("div",wl,[e($,null,{default:a(()=>[e(y(fe))]),_:1}),r("span",null,n(l.$t("employee.list")||"员工列表"),1),F.value.length>0?(u(),v(U,{key:0,type:"info",class:"count-tag"},{default:a(()=>[i(n(F.value.length),1)]),_:1})):j("",!0)]),r("div",kl,[e(Ee,null,{default:a(()=>[e(b,{icon:y(je),size:"small",type:L.value==="table"?"primary":"",onClick:o[4]||(o[4]=t=>L.value="table")},{default:a(()=>[i(n(l.$t("common.table")||"表格"),1)]),_:1},8,["icon","type"]),e(b,{icon:y(Ie),size:"small",type:L.value==="card"?"primary":"",onClick:o[5]||(o[5]=t=>L.value="card")},{default:a(()=>[i(n(l.$t("common.card")||"卡片"),1)]),_:1},8,["icon","type"])]),_:1})])])]),default:a(()=>[L.value==="table"?(u(),g("div",Vl,[D((u(),v(Ue,{data:F.value,class:"employee-table",onRowClick:B},{default:a(()=>[e(C,{prop:"employee_id",label:l.$t("employee.id"),width:"120"},null,8,["label"]),e(C,{label:l.$t("employee.name"),width:"150"},{default:a(({row:t})=>[i(n(`${t.first_name} ${t.last_name}`),1)]),_:1},8,["label"]),e(C,{prop:"department_id",label:l.$t("employee.department"),width:"120"},{default:a(({row:t})=>[t.department_id?(u(),g("span",Cl,n(ie(t.department_id)),1)):(u(),g("span",El,n(l.$t("common.notSet")),1))]),_:1},8,["label"]),e(C,{prop:"position",label:l.$t("employee.position"),width:"150"},null,8,["label"]),e(C,{prop:"phone",label:l.$t("employee.phone"),width:"120"},null,8,["label"]),e(C,{label:l.$t("employee.whiteCard"),width:"120"},{default:a(({row:t})=>[e(U,{type:ne(t.white_card_expiry)?"success":"danger"},{default:a(()=>[i(n(re(t.white_card_expiry)),1)]),_:2},1032,["type"])]),_:1},8,["label"]),e(C,{prop:"status",label:l.$t("employee.status"),width:"100"},{default:a(({row:t})=>[e(U,{type:Z(t.status)},{default:a(()=>[i(n(l.$t(`status.${t.status}`)),1)]),_:2},1032,["type"])]),_:1},8,["label"]),e(C,{label:l.$t("employee.canCheckin"),width:"80"},{default:a(({row:t})=>[e($,{color:t.can_checkin?"#67C23A":"#F56C6C"},{default:a(()=>[t.can_checkin?(u(),v(y(le),{key:0})):(u(),v(y(_e),{key:1}))]),_:2},1032,["color"])]),_:1},8,["label"]),e(C,{label:l.$t("common.actions"),width:"200",fixed:"right"},{default:a(({row:t})=>[e(b,{size:"small",onClick:T=>B(t)},{default:a(()=>[i(n(l.$t("common.view")),1)]),_:2},1032,["onClick"]),D((u(),v(b,{size:"small",type:"primary",onClick:T=>oe(t)},{default:a(()=>[i(n(l.$t("common.edit")),1)]),_:2},1032,["onClick"])),[[N,"EMPLOYEE_EDIT"]]),D((u(),v(b,{size:"small",type:"danger",onClick:T=>se(t)},{default:a(()=>[i(n(l.$t("common.delete")),1)]),_:2},1032,["onClick"])),[[N,"EMPLOYEE_DELETE"]])]),_:1},8,["label"])]),_:1},8,["data"])),[[Le,I.value]])])):(u(),g("div",Ul,[r("div",zl,[(u(!0),g(A,null,Y(F.value,t=>(u(),g("div",{key:t.id,class:"employee-card",onClick:T=>B(t)},[r("div",Ml,[e(ze,{size:60,src:t.profile_photo},{default:a(()=>[e($,null,{default:a(()=>[e(y(fe))]),_:1})]),_:2},1032,["src"]),r("div",{class:pe(["status-badge",t.status])},[e($,null,{default:a(()=>[t.status==="active"?(u(),v(y(le),{key:0})):(u(),v(y(He),{key:1}))]),_:2},1024)],2)]),r("div",ql,[r("h3",Tl,n(`${t.first_name} ${t.last_name}`),1),r("p",Fl,n(t.position),1),r("p",Ll,n(ie(t.department_id)),1),r("div",Nl,[e(U,{type:Z(t.status),size:"small"},{default:a(()=>[i(n(l.$t(`status.${t.status}`)),1)]),_:2},1032,["type"]),t.can_checkin?(u(),v(U,{key:0,type:"success",size:"small"},{default:a(()=>[i(n(l.$t("employee.canCheckin")||"可签到"),1)]),_:1})):j("",!0)])]),r("div",Pl,[e(b,{size:"small",circle:"",icon:y(Ge),onClick:ae(T=>B(t),["stop"])},null,8,["icon","onClick"]),D(e(b,{size:"small",circle:"",icon:y(Je),type:"primary",onClick:ae(T=>oe(t),["stop"])},null,8,["icon","onClick"]),[[N,"EMPLOYEE_EDIT"]]),D(e(b,{size:"small",circle:"",icon:y(Ke),type:"danger",onClick:ae(T=>se(t),["stop"])},null,8,["icon","onClick"]),[[N,"EMPLOYEE_DELETE"]])])],8,Dl))),128))])]))]),_:1}),e(De,{"current-page":G.value,"onUpdate:currentPage":o[6]||(o[6]=t=>G.value=t),"page-size":J.value,"onUpdate:pageSize":o[7]||(o[7]=t=>J.value=t),"page-sizes":[10,20,50,100],total:te.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:h,onCurrentChange:h,style:{"margin-top":"20px","text-align":"center"}},null,8,["current-page","page-size","total"]),e(me,{title:be.value,modelValue:M.value,"onUpdate:modelValue":o[29]||(o[29]=t=>M.value=t),width:"800px","close-on-click-modal":!1},{footer:a(()=>[e(b,{onClick:o[28]||(o[28]=t=>M.value=!1)},{default:a(()=>[i(n(l.$t("common.cancel")),1)]),_:1}),e(b,{type:"primary",onClick:$e,loading:Q.value},{default:a(()=>[i(n(l.$t("common.save")),1)]),_:1},8,["loading"])]),default:a(()=>[e(Te,{ref_key:"employeeFormRef",ref:X,model:s,rules:ve,"label-width":"150px"},{default:a(()=>[e(k,{gutter:20},{default:a(()=>[e(d,{span:12},{default:a(()=>[e(c,{label:l.$t("employee.id"),prop:"employee_id"},{default:a(()=>[e(w,{modelValue:s.employee_id,"onUpdate:modelValue":o[8]||(o[8]=t=>s.employee_id=t),disabled:q.value},null,8,["modelValue","disabled"])]),_:1},8,["label"])]),_:1}),e(d,{span:12},{default:a(()=>[e(c,{label:l.$t("employee.status"),prop:"status"},{default:a(()=>[e(E,{modelValue:s.status,"onUpdate:modelValue":o[9]||(o[9]=t=>s.status=t),style:{width:"100%"}},{default:a(()=>[e(m,{label:l.$t("status.active"),value:"active"},null,8,["label"]),e(m,{label:l.$t("status.inactive"),value:"inactive"},null,8,["label"]),e(m,{label:l.$t("status.suspended"),value:"suspended"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(k,{gutter:20},{default:a(()=>[e(d,{span:12},{default:a(()=>[e(c,{label:l.$t("employee.firstName"),prop:"first_name"},{default:a(()=>[e(w,{modelValue:s.first_name,"onUpdate:modelValue":o[10]||(o[10]=t=>s.first_name=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(d,{span:12},{default:a(()=>[e(c,{label:l.$t("employee.lastName"),prop:"last_name"},{default:a(()=>[e(w,{modelValue:s.last_name,"onUpdate:modelValue":o[11]||(o[11]=t=>s.last_name=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(k,{gutter:20},{default:a(()=>[e(d,{span:12},{default:a(()=>[e(c,{label:l.$t("employee.email"),prop:"email"},{default:a(()=>[e(w,{modelValue:s.email,"onUpdate:modelValue":o[12]||(o[12]=t=>s.email=t),type:"email"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(d,{span:12},{default:a(()=>[e(c,{label:l.$t("employee.phone"),prop:"phone"},{default:a(()=>[e(w,{modelValue:s.phone,"onUpdate:modelValue":o[13]||(o[13]=t=>s.phone=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(k,{gutter:20},{default:a(()=>[e(d,{span:12},{default:a(()=>[e(c,{label:l.$t("employee.dateOfBirth"),prop:"date_of_birth"},{default:a(()=>[e(x,{modelValue:s.date_of_birth,"onUpdate:modelValue":o[14]||(o[14]=t=>s.date_of_birth=t),type:"date",style:{width:"100%"},placeholder:l.$t("employee.selectDate")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(d,{span:12},{default:a(()=>[e(c,{label:l.$t("employee.visaStatus"),prop:"visa_status"},{default:a(()=>[e(E,{modelValue:s.visa_status,"onUpdate:modelValue":o[15]||(o[15]=t=>s.visa_status=t),style:{width:"100%"}},{default:a(()=>[e(m,{label:l.$t("visa.citizen"),value:"citizen"},null,8,["label"]),e(m,{label:l.$t("visa.permanentResident"),value:"permanent_resident"},null,8,["label"]),e(m,{label:l.$t("visa.temporaryVisa"),value:"temporary_visa"},null,8,["label"]),e(m,{label:l.$t("visa.workingHoliday"),value:"working_holiday"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(k,{gutter:20},{default:a(()=>[e(d,{span:12},{default:a(()=>[e(c,{label:l.$t("employee.whiteCardNumber"),prop:"white_card_number"},{default:a(()=>[e(w,{modelValue:s.white_card_number,"onUpdate:modelValue":o[16]||(o[16]=t=>s.white_card_number=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(d,{span:12},{default:a(()=>[e(c,{label:l.$t("employee.whiteCardExpiry"),prop:"white_card_expiry"},{default:a(()=>[e(x,{modelValue:s.white_card_expiry,"onUpdate:modelValue":o[17]||(o[17]=t=>s.white_card_expiry=t),type:"date",style:{width:"100%"},placeholder:l.$t("employee.selectDate")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),e(k,{gutter:20},{default:a(()=>[e(d,{span:12},{default:a(()=>[e(c,{label:l.$t("employee.department"),prop:"department"},{default:a(()=>[e(E,{modelValue:s.department,"onUpdate:modelValue":o[18]||(o[18]=t=>s.department=t),style:{width:"100%"}},{default:a(()=>[e(m,{label:l.$t("department.construction"),value:"Construction"},null,8,["label"]),e(m,{label:l.$t("department.electrical"),value:"Electrical"},null,8,["label"]),e(m,{label:l.$t("department.safety"),value:"Safety"},null,8,["label"]),e(m,{label:l.$t("department.management"),value:"Management"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(d,{span:12},{default:a(()=>[e(c,{label:l.$t("employee.position"),prop:"position"},{default:a(()=>[e(w,{modelValue:s.position,"onUpdate:modelValue":o[19]||(o[19]=t=>s.position=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(k,{gutter:20},{default:a(()=>[e(d,{span:12},{default:a(()=>[e(c,{label:l.$t("employee.hourlyRate"),prop:"hourly_rate"},{default:a(()=>[e(Me,{modelValue:s.hourly_rate,"onUpdate:modelValue":o[20]||(o[20]=t=>s.hourly_rate=t),precision:2,min:15,max:200,style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(d,{span:12},{default:a(()=>[e(c,{label:l.$t("employee.employmentType"),prop:"employment_type"},{default:a(()=>[e(E,{modelValue:s.employment_type,"onUpdate:modelValue":o[21]||(o[21]=t=>s.employment_type=t),style:{width:"100%"}},{default:a(()=>[e(m,{label:l.$t("employment.fullTime"),value:"full_time"},null,8,["label"]),e(m,{label:l.$t("employment.partTime"),value:"part_time"},null,8,["label"]),e(m,{label:l.$t("employment.casual"),value:"casual"},null,8,["label"]),e(m,{label:l.$t("employment.contractor"),value:"contractor"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(k,{gutter:20},{default:a(()=>[e(d,{span:12},{default:a(()=>[e(c,{label:l.$t("employee.startDate"),prop:"start_date"},{default:a(()=>[e(x,{modelValue:s.start_date,"onUpdate:modelValue":o[22]||(o[22]=t=>s.start_date=t),type:"date",style:{width:"100%"},placeholder:l.$t("employee.selectDate")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(d,{span:12},{default:a(()=>[e(c,{label:l.$t("employee.canCheckin"),prop:"can_checkin"},{default:a(()=>[e(qe,{modelValue:s.can_checkin,"onUpdate:modelValue":o[23]||(o[23]=t=>s.can_checkin=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(de,null,{default:a(()=>[i(n(l.$t("employee.emergencyContact")),1)]),_:1}),e(k,{gutter:20},{default:a(()=>[e(d,{span:8},{default:a(()=>[e(c,{label:l.$t("employee.emergencyName"),prop:"emergency_contact_name"},{default:a(()=>[e(w,{modelValue:s.emergency_contact_name,"onUpdate:modelValue":o[24]||(o[24]=t=>s.emergency_contact_name=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(d,{span:8},{default:a(()=>[e(c,{label:l.$t("employee.emergencyPhone"),prop:"emergency_contact_phone"},{default:a(()=>[e(w,{modelValue:s.emergency_contact_phone,"onUpdate:modelValue":o[25]||(o[25]=t=>s.emergency_contact_phone=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(d,{span:8},{default:a(()=>[e(c,{label:l.$t("employee.emergencyRelationship"),prop:"emergency_contact_relationship"},{default:a(()=>[e(w,{modelValue:s.emergency_contact_relationship,"onUpdate:modelValue":o[26]||(o[26]=t=>s.emergency_contact_relationship=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(de,null,{default:a(()=>[i(n(l.$t("employee.worksiteAssignment")),1)]),_:1}),e(c,{label:l.$t("employee.assignedWorksites")},{default:a(()=>[e(E,{modelValue:s.worksite_ids,"onUpdate:modelValue":o[27]||(o[27]=t=>s.worksite_ids=t),multiple:"",style:{width:"100%"}},{default:a(()=>[(u(!0),g(A,null,Y(H.value,t=>(u(),v(m,{key:t.worksite_id,label:t.name,value:t.worksite_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"]),e(me,{title:l.$t("employee.details"),modelValue:K.value,"onUpdate:modelValue":o[30]||(o[30]=t=>K.value=t),width:"600px"},{default:a(()=>[_.value?(u(),g("div",Sl,[e(Fe,{column:2,border:""},{default:a(()=>[e(V,{label:l.$t("employee.id")},{default:a(()=>[i(n(_.value.employee_id),1)]),_:1},8,["label"]),e(V,{label:l.$t("employee.name")},{default:a(()=>[i(n(`${_.value.first_name} ${_.value.last_name}`),1)]),_:1},8,["label"]),e(V,{label:l.$t("employee.email")},{default:a(()=>[i(n(_.value.email),1)]),_:1},8,["label"]),e(V,{label:l.$t("employee.phone")},{default:a(()=>[i(n(_.value.phone),1)]),_:1},8,["label"]),e(V,{label:l.$t("employee.department")},{default:a(()=>[i(n(l.$t(`department.${_.value.department.toLowerCase()}`)),1)]),_:1},8,["label"]),e(V,{label:l.$t("employee.position")},{default:a(()=>[i(n(_.value.position),1)]),_:1},8,["label"]),e(V,{label:l.$t("employee.whiteCardNumber")},{default:a(()=>[i(n(_.value.white_card_number),1)]),_:1},8,["label"]),e(V,{label:l.$t("employee.whiteCardExpiry")},{default:a(()=>[e(U,{type:ne(_.value.white_card_expiry)?"success":"danger"},{default:a(()=>[i(n(re(_.value.white_card_expiry)),1)]),_:1},8,["type"])]),_:1},8,["label"]),e(V,{label:l.$t("employee.status")},{default:a(()=>[e(U,{type:Z(_.value.status)},{default:a(()=>[i(n(l.$t(`status.${_.value.status}`)),1)]),_:1},8,["type"])]),_:1},8,["label"]),e(V,{label:l.$t("employee.canCheckin")},{default:a(()=>[e($,{color:_.value.can_checkin?"#67C23A":"#F56C6C"},{default:a(()=>[_.value.can_checkin?(u(),v(y(le),{key:0})):(u(),v(y(_e),{key:1}))]),_:1},8,["color"])]),_:1},8,["label"])]),_:1}),_.value.Worksites&&_.value.Worksites.length>0?(u(),g("div",Ol,[r("h4",null,n(l.$t("employee.assignedWorksites")),1),(u(!0),g(A,null,Y(_.value.Worksites,t=>(u(),v(U,{key:t.worksite_id,style:{"margin-right":"8px"}},{default:a(()=>[i(n(t.name),1)]),_:2},1024))),128))])):j("",!0)])):j("",!0)]),_:1},8,["title","modelValue"])])}}}),jl=Xe(Rl,[["__scopeId","data-v-fbf7c799"]]);export{jl as default};
