import{_ as L,b as U,r as m,Q as M,R as B,k as D,S as q,e as _,g as s,h as a,w as o,l as n,H as k,M as i,z as h,U as V,t,V as j,W as A,X as R,Y as O,L as F,Z as H,A as J,$ as Q,a0 as W,j as X,o as p}from"./index-CC1QUR8I.js";const Y={class:"checkin-result-container"},Z={class:"language-selector"},G={class:"result-content"},K={key:0,class:"success-result"},P={class:"success-icon"},x={class:"success-title"},ee={class:"employee-info"},se={class:"employee-id"},te={class:"checkin-details"},ae={class:"detail-item"},ne={class:"label"},oe={class:"value"},ce={class:"detail-item"},le={class:"label"},ie={class:"value"},ue={class:"detail-item"},de={class:"label"},re={class:"value"},_e={class:"detail-item"},he={class:"label"},pe={key:0,class:"location-info"},ge={class:"detail-item"},ve={class:"label"},ke={class:"value"},me={class:"action-buttons"},fe={key:1,class:"error-result"},ye={class:"error-icon"},Re={class:"error-title"},Ce={class:"error-message"},Se={class:"action-buttons"},$e={key:2,class:"no-result"},ze={class:"no-result-icon"},we={class:"action-buttons"},Ie={class:"footer-info"},be={__name:"CheckinResult",setup(Ne){const u=D(),g=X(),{t:d,locale:r}=U(),c=m(null),v=m(null),f=m(""),C=M(()=>r.value==="zh-CN"?"中文":"English"),S=e=>new Date(e).toLocaleString(r.value==="zh-CN"?"zh-CN":"en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),$=e=>d(e==="in"?"checkinResult.checkinIn":"checkinResult.checkinOut"),z=e=>({approved:d("checkinResult.approved"),pending:d("checkinResult.pending"),rejected:d("checkinResult.rejected")})[e]||e,w=e=>({approved:"success",pending:"warning",rejected:"danger"})[e]||"info",I=e=>{r.value=e,localStorage.setItem("language",e)},b=()=>{const e=u.params.token;g.push(`/checkin/${e}`)},N=()=>{g.go(-1)},E=()=>{const e=u.params.token;e?g.push(`/checkin/${e}`):g.push("/")},y=()=>{f.value=new Date().toLocaleString(r.value==="zh-CN"?"zh-CN":"en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})};return B(()=>{if(u.query.result)try{c.value=JSON.parse(decodeURIComponent(u.query.result))}catch(T){console.error("解析签到结果失败:",T),v.value=d("checkinResult.parseError")}else u.query.error&&(v.value=decodeURIComponent(u.query.error));const e=localStorage.getItem("language");e?r.value=e:(r.value="en-US",localStorage.setItem("language","en-US")),y();const l=setInterval(y,1e3);q(()=>{clearInterval(l)})}),(e,l)=>(p(),_("div",Y,[s("div",Z,[a(n(O),{onCommand:I},{dropdown:o(()=>[a(n(A),null,{default:o(()=>[a(n(R),{command:"en-US"},{default:o(()=>[...l[0]||(l[0]=[i("English",-1)])]),_:1}),a(n(R),{command:"zh-CN"},{default:o(()=>[...l[1]||(l[1]=[i("中文",-1)])]),_:1})]),_:1})]),default:o(()=>[a(n(k),{text:""},{default:o(()=>[a(n(h),null,{default:o(()=>[a(n(V))]),_:1}),i(" "+t(C.value)+" ",1),a(n(h),{class:"el-icon--right"},{default:o(()=>[a(n(j))]),_:1})]),_:1})]),_:1})]),s("div",G,[c.value?(p(),_("div",K,[s("div",P,[a(n(h),{size:"80",color:"#67C23A"},{default:o(()=>[a(n(H))]),_:1})]),s("h1",x,t(e.$t("checkinResult.success")),1),s("div",ee,[s("h2",null,t(c.value.employee_name),1),s("p",se,t(c.value.employee_id),1)]),s("div",te,[s("div",ae,[s("span",ne,t(e.$t("checkinResult.time"))+":",1),s("span",oe,t(S(c.value.checkin_time)),1)]),s("div",ce,[s("span",le,t(e.$t("checkinResult.type"))+":",1),s("span",ie,t($(c.value.checkin_type)),1)]),s("div",ue,[s("span",de,t(e.$t("checkinResult.worksite"))+":",1),s("span",re,t(c.value.worksite_name),1)]),s("div",_e,[s("span",he,t(e.$t("checkinResult.status"))+":",1),a(n(J),{type:w(c.value.status),size:"large"},{default:o(()=>[i(t(z(c.value.status)),1)]),_:1},8,["type"])])]),c.value.address?(p(),_("div",pe,[s("div",ge,[s("span",ve,t(e.$t("checkinResult.location"))+":",1),s("span",ke,t(c.value.address),1)])])):F("",!0),s("div",me,[a(n(k),{onClick:b,type:"primary",size:"large"},{default:o(()=>[i(t(e.$t("checkinResult.checkinAgain")),1)]),_:1})])])):v.value?(p(),_("div",fe,[s("div",ye,[a(n(h),{size:"80",color:"#F56C6C"},{default:o(()=>[a(n(Q))]),_:1})]),s("h1",Re,t(e.$t("checkinResult.failed")),1),s("p",Ce,t(v.value),1),s("div",Se,[a(n(k),{onClick:N,type:"primary",size:"large"},{default:o(()=>[i(t(e.$t("checkinResult.goBack")),1)]),_:1})])])):(p(),_("div",$e,[s("div",ze,[a(n(h),{size:"80",color:"#909399"},{default:o(()=>[a(n(W))]),_:1})]),s("h1",null,t(e.$t("checkinResult.noResult")),1),s("div",we,[a(n(k),{onClick:E,type:"primary",size:"large"},{default:o(()=>[i(t(e.$t("checkinResult.goToCheckin")),1)]),_:1})])]))]),s("div",Ie,[s("p",null,t(e.$t("checkinResult.currentTime"))+": "+t(f.value),1)])]))}},Te=L(be,[["__scopeId","data-v-61d41e23"]]);export{Te as default};
